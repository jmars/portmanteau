#!/usr/bin/env node
// Generated by IcedCoffeeScript 1.3.3e
var cwd, director, dirs, exec, fs, router;

fs = require('fs');

director = require('director');

exec = require('child_process').exec;

cwd = process.cwd();

dirs = ['controllers', 'models', 'views', 'templates', 'components'];

router = new director.cli.Router;

router.on(/new\s([\w]+)/i, function(name) {
  var appdir, contents, dir, file, files, _i, _len;
  files = {
    'component.json': JSON.stringify({
      name: name,
      dependencies: {
        'jmars/sockrpc': '*',
        'jmars/dustjs': '*'
      }
    }),
    'package.json': JSON.stringify({
      author: '',
      name: name,
      description: '',
      version: '0.0.1',
      dependencies: {
        portmanteau: 'https://github.com/jmars/portmanteau/tarball/master',
        express: '',
        stylus: '',
        nib: '',
        jade: '',
        'iced-coffee-script': '',
        'dustjs-linkedin': ''
      }
    })
  };
  fs.mkdirSync(appdir = "" + cwd + "/" + name);
  for (_i = 0, _len = dirs.length; _i < _len; _i++) {
    dir = dirs[_i];
    fs.mkdirSync("" + appdir + "/" + dir);
  }
  for (file in files) {
    contents = files[file];
    fs.writeFileSync("" + appdir + "/" + file, contents, 'utf8');
  }
  return exec("cp -r " + __dirname + "/../template/* " + cwd + "/" + name, function() {
    return console.log('created');
  });
});

router.dispatch('on', process.argv.slice(2).join(' '));
